---
title: "Data Sources"
format: live-html
engine: knitr
resources: 
  - "data"
webr:
    packages:
      - duckdb
      - dbplyr
    resources:
      - data/mtcars.duckdb
---

{{< include ./_extensions/r-wasm/live/_knitr.qmd >}}

## Databases

As with API's a *real* connection to a remote database is right now not feasible using webR.
But we can use *duckDB* which is a fast in-process analytical database.
It has one more advantage: It is locally hosted, which means it is a physical file on your machine.
We also use [dbplyr](https://dbplyr.tidyverse.org/) which is a database backend that uses the same or similar logic as *dplyr* for data manipulation with remote data sources.

```{webr-r}
library(duckdb)
library(dbplyr)

ddb_con <- dbConnect(duckdb(), dbdir = "data/mtcars.duckdb", read_only = FALSE)

mtcars <- tbl(ddb_con,"mtcars_table") |> collect()

```

So did it work? 
You can query the object using the same commands as described above.
Another way is of course to plot it, but that is hard when we do not know what variables are in the dataset.
Sometimes in those cases, the R base plotting is an excellent way of doing some quick E(xplorative)D(ata)A(nalysis)

```{webr}

plot(mtcars)

```



